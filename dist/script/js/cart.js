"use strict";!function(s){if(s.cookie("cookiesid")&&s.cookie("cookienum")){var i=s.cookie("cookiesid").split(","),o=s.cookie("cookienum").split(",");s.each(i,function(i,t){!function(n,e){s.ajax({url:"http://10.31.158.60:8080/gree/gree/php/index.php",dataType:"json"}).done(function(i){s.each(i,function(i,t){if(n==t.picid){var o=s(".goods-item:hidden").clone(!0,!0);o.find(".goods-pic").find("img").attr("src",t.url),o.find(".goods-pic").find("a").attr("href","http://10.31.158.60/gree/gree/src/details.html?sid="+t.picid),o.find(".goods-pic").find("img").attr("sid",t.picid),o.find(".goods-d-info").find("a").html(t.title),o.find(".b-price").find("strong").html(t.price),o.find(".quantity-form").find("input").val(e),o.find(".b-sum").find("strong").html((t.price*e).toFixed(2)),o.css("display","block"),s(".item-list").append(o)}})})}(t,o[i]),s(".empty-cart").hide()})}else s(".empty-cart").show();function n(){var o=0,n=0;s(".goods-item:visible").each(function(i,t){s(t).find(".cart-checkbox input").prop("checked")&&(o+=parseInt(s(t).find(".b-sum").find("strong").html()),n+=parseInt(s(t).find(".quantity-form").find("input").val()))}),s(".amount-sum").find("em").html(n),s(".price-sum .totalprice").html(o)}function e(i){var t=i.parents(".goods-item").find(".goods-pic img").attr("sid"),o=s.cookie("cookiesid").split(","),n=s.cookie("cookienum").split(",");n[o.indexOf(t)]=i.parents(".goods-item").find(".quantity-form input").get(0).value,s.cookie("cookienum",n.toString(),7)}function t(i){var o=i,t=s.cookie("cookiesid").split(","),n=s.cookie("cookienum").split(","),e=-1;s.each(t,function(i,t){o==t&&(e=i)}),n.splice(e,1),t.splice(e,1),s.cookie("cookienum",n.toString(),7),s.cookie("cookiesid",n.toString(),7)}s(".empty-cart-msg a").on("click",function(){location.href="index.html"}),s(".allsel").on("click",function(){s(".allsel").prop("checked")?s(".b-checkbox input").prop("checked",!0):s(".b-checkbox input").prop("checked",!1),n()}),s(".b-checkbox input").on("click",function(){s(".b-checkbox input").size()-1==s("input:checked").not(".allsel").length?s(".allsel").prop("checked",!0):s(".allsel").prop("checked",!1),n()}),s(".quantity-add").on("click",function(){var i=s(this).parents(".goods-item").find(".quantity-form input").val();i++,s(this).parents(".goods-item").find(".quantity-form input").val(i);var t=s(this).parents(".goods-item").find(".b-price strong").html();s(this).parents(".goods-item").find(".b-sum").find("strong").html(i*t),n(),e(s(this))}),s(".quantity-down").on("click",function(){var i=s(this).parents(".goods-item").find(".quantity-form input").val();if(--i<=1){s(this).parents(".goods-item").find(".quantity-form input").val(1);var t=s(this).parents(".goods-item").find(".b-price strong").html();s(this).parents(".goods-item").find(".b-sum").find("strong").html(t)}else{s(this).parents(".goods-item").find(".quantity-form input").val(i);var o=s(this).parents(".goods-item").find(".b-price strong").html();s(this).parents(".goods-item").find(".b-sum").find("strong").html(i*o)}n(),e(s(this))}),s(".quantity-form input").on("input",function(){var i=s(this).val();/^\d+$/g.test(i)?i<1?s(this).val(1):s(this).val(i):s(this).val(1);var t=s(this).parents(".goods-item").find(".b-price strong").html();s(this).parents(".goods-item").find(".b-sum").find("strong").html(t*i),n(),e(s(this))}),s(".b-action a:first").on("click",function(){confirm("是否确认删除？")&&(s(this).parents(".goods-item").remove(),t(s(this).parents(".goods-item").find(".goods-pic img").attr("sid")));n()}),s(".operation a:first").on("click",function(){s(".goods-item:visible").find("input:checkbox").is(":checked")?confirm("是否确认删除选中产品")&&s(".goods-item:visible").each(function(){s(this).find("input:checkbox").is(":checked")&&(s(this).remove(),t(s(this).find(".goods-pic img").attr("sid")))}):alert("未选中删除的商品，请选中对应的商品在点击删除")})}(jQuery);